% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/wfs_bu.R
\name{catr_wfs_bu_bbox}
\alias{catr_wfs_bu_bbox}
\alias{catr_wfs_bu_rc}
\title{\strong{WFS INSPIRE}: Download Buildings}
\usage{
catr_wfs_bu_bbox(bbox, what = "building", srs, verbose = FALSE)

catr_wfs_bu_rc(rc, what = "building", srs = NULL, verbose = FALSE)
}
\arguments{
\item{bbox}{A numeric vector of length 4 with the coordinates that defines
the bounding box: \code{c(xmin, ymin, xmax, ymax)} or a \code{sf/sfc} object, as
provided by the \strong{sf} package.}

\item{what}{Information to load. It could be \code{"building"} for buildings,
\code{"buildingpart"} for parts of a building or \code{"other"} for others (
swimming pools, etc.).}

\item{srs}{SRS/CRS to use on the query. To check the admitted values check
\link{catr_srs_values}, specifically the \code{wfs_service} column. See \strong{Details}.}

\item{verbose}{Logical, displays information. Useful for debugging,
default is \code{FALSE}.}

\item{rc}{The cadastral reference to be extracted.}
}
\value{
A \code{sf} object.
}
\description{
Get the spatial data of buildings. The WFS Service allows to perform
two types of queries:
\itemize{
\item By bounding box: Implemented on \code{catr_wfs_bu_bbox()}. Extract objects
included on the bounding box provided. See \strong{Details}.
}

\itemize{
\item By cadastral reference: Implemented on \code{catr_wfs_bu_rc()}. Extract
objects of specific cadastral references.
}

Check the \href{https://www.catastro.minhap.es/webinspire/documentos/inspire-bu-WFS.pdf}{API Docs}.
}
\details{
When \code{bbox} is a numeric vector, make sure that the \code{srs} matches the
coordinate values. Additionally, when the \code{srs} correspond to a geographic
reference system (4326, 4258), the function queries the bounding box on
\href{https://epsg.io/3857}{EPSG:3857} - Web Mercator, to overcome
a potential bug on the API side. The result is provided always in the SRS
provided in \code{srs}.

When \code{bbox} is a \code{sf} object, the value \code{srs} is ignored. The query is
performed using \href{https://epsg.io/3857}{EPSG:3857} (Web Mercator) and the
spatial object is projected back to the SRS of the initial object.
}
\section{API Limits}{
The API service is limited to a bounding box of 4km2 and a maximum of 5.000
elements.
}

\examples{
\dontshow{if (tolower(Sys.info()[["sysname"]]) != "linux") (if (getRversion() >= "3.4") withAutoprint else force)(\{ # examplesIf}
\donttest{
# Using bbox
building <- catr_wfs_bu_bbox(c(
  376550,
  4545424,
  376600,
  4545474
),
srs = 25830
)
library(ggplot2)
ggplot(building) +
  geom_sf() +
  labs(title = "Search using bbox")

# Using rc
rc <- catr_wfs_bu_rc("6656601UL7465N")
library(ggplot2)
ggplot(rc) +
  geom_sf() +
  labs(title = "Search using rc")
}
\dontshow{\}) # examplesIf}
}
\references{
\href{https://www.catastro.minhap.es/webinspire/documentos/inspire-bu-WFS.pdf}{API Documentation}

\href{https://www.catastro.minhap.es/webinspire/index.html}{INSPIRE Services for Cadastral Cartography}
}
\seealso{
\code{\link[sf:st_bbox]{sf::st_bbox()}}

INSPIRE API functions:
\code{\link{catr_atom_ad_db_all}()},
\code{\link{catr_atom_ad}()},
\code{\link{catr_atom_bu_db_all}()},
\code{\link{catr_atom_bu}()},
\code{\link{catr_atom_cp_db_all}()},
\code{\link{catr_atom_cp}()},
\code{\link{catr_wfs_ad_bbox}()},
\code{\link{catr_wfs_cp_bbox}()},
\code{\link{catr_wms_layer}()}

Other INSPIRE WFS services:
\code{\link{catr_srs_values}},
\code{\link{catr_wfs_ad_bbox}()},
\code{\link{catr_wfs_cp_bbox}()}

Other buildings: 
\code{\link{catr_atom_bu_db_all}()},
\code{\link{catr_atom_bu}()}

Other spatial: 
\code{\link{catr_atom_ad}()},
\code{\link{catr_atom_bu}()},
\code{\link{catr_atom_cp}()},
\code{\link{catr_wfs_ad_bbox}()},
\code{\link{catr_wfs_cp_bbox}()},
\code{\link{catr_wms_layer}()}
}
\concept{INSPIRE}
\concept{WFS}
\concept{buildings}
\concept{spatial}
